var ZSDKUtil=function(c){function f(){}function g(a){var b={};a=a||window.location.href;return a.substr(a.indexOf("?")+1).split("\x26").forEach(function(a){a=a.split("\x3d");b[a[0]]=a[1]}),b.hasOwnProperty("serviceOrigin")&&(b.serviceOrigin=decodeURIComponent(b.serviceOrigin)),b}var d,a=g();return f.prototype.Info=function(){(c.isDevMode()||c.isLogEnabled())&&console.info.apply(console,arguments)},f.prototype.Error=console.error,c.GetQueryParams=g,c.isDevMode=function(){return a&&a.isDevMode},c.isLogEnabled=
function(){return a&&a.isLogEnabled},c.getLogger=function(){return d&&d instanceof f||(d=new f),d},c}(window.ZSDKUtil||{}),ZSDKMessageManager=function(c){function f(b){try{var d="string"==typeof b.data?JSON.parse(b.data):b.data}catch(u){d=b.data}var c=d.type;try{var f;if(!(f="__REGISTER__"===c)){var k=b.source,r=b.origin;f=!(!h.isRegistered()||n!==k||v!==r)||Error("Un-Authorized Message.")}if(f)switch(c){case "__REGISTER__":b=d;n=window.parent;v=w.serviceOrigin;h.dcType=window.location.origin.split(".").pop().toUpperCase();
"COM"===h.dcType&&(h.dcType="US");h.key=b.uniqueID;h.parentWindow=n;h._isRegistered=!0;e({type:"__REGISTER__",widgetOrigin:p(),uniqueID:h.key},h);a(h,"Load",b.data);break;case "__EVENT_RESPONSE__":var m=d.promiseID,q=d.data,t=d.isSuccess;l.hasOwnProperty(m)&&(t?l[m].resolve(q):l[m].reject(q),l[m]=void 0,delete l[m]);break;default:g(b,d)}}catch(u){x.Error("[SDK.MessageHandler] \x3d\x3e ",u.stack)}}function g(b,c){var e=c.widgetID;b=c.eventName;if(h.key===e)var f=a(h,b,c.data);else{var k=h._childWidgets[e];
k&&(f=a(k,b,c.data))}if(c.isPromise){var g={};Promise.all(f).then(function(b){g.response=b;g.widgetID=e;g.sourceWidgetID=h.key;d(c,g)}).catch(function(b){g.response=b;g.widgetID=e;g.sourceWidgetID=h.key;d(c,g)})}}function d(b,a){e({type:"__EVENT_RESPONSE__",widgetOrigin:p(),uniqueID:h.key,eventName:b.eventName,data:a,promiseID:b.promiseID},h)}function a(b,a,d){a=b.eventHandlers[a];var c=[];if(Array.isArray(a))for(var e=0;e<a.length;e++){try{var f=a[e].call(b,d);var g=f instanceof Promise?f.then(function(b){return{isSuccess:!0,
response:b}}).catch(function(b){return{isSuccess:!1,response:b}}):{isSuccess:!0,response:f}}catch(q){g={isSuccess:!1,response:q}}c.push(g)}return c}function e(a,d){var c,e=a.isPromise;if(e&&(c="Promise"+t++,a.promiseID=c),d&&(a.uniqueID=(d.parentWidget||d).key,a.widgetID=d.key),a.time=(new Date).getTime(),r(a),e)return b(c)}function b(b){return new Promise(function(a,d){l[b]={resolve:a,reject:d,time:(new Date).getTime()}})}function k(){r({type:"__DEREGISTER__",uniqueID:h.key})}function r(b){if("object"==
typeof b&&(b.widgetOrigin=encodeURIComponent(p())),!n)throw Error("Parentwindow reference not found.");n.postMessage(b,w.serviceOrigin)}function p(){return window.location.protocol+"//"+window.location.host+window.location.pathname}var h,n,v,x=ZSDKUtil.getLogger(),t=100,l={},w=ZSDKUtil.GetQueryParams();return c.Init=function(b){h=b;window.addEventListener("message",f);window.addEventListener("unload",k)},c.SendEvent=e,c}(window.ZSDKMessageManager||{});
window.ZSDK=function(){function c(d){this.serviceOrigin=d.serviceOrigin||g.serviceOrigin;this.parentWidget=d.parentWidget;this.key=d.key;this._isRegistered=!1;this._childWidgets={};this.eventHandlers=Object.create(null);this.meta}var f,g=ZSDKUtil.GetQueryParams();return c.prototype.on=function(d,a){if("string"!=typeof d)throw Error("Invalid eventname parameter passed.");if("function"!=typeof a)throw Error("Invalid function parameter passed.");var c=this.eventHandlers[d];if(Array.isArray(c)||(this.eventHandlers[d]=
c=[]),c.push(a),"Load"!==d){var b={type:"__EVENT_BIND__",eventName:d,count:c.length};this.parentWidget&&!this.parentWidget.isRegistered()||!this.parentWidget&&!this.isRegistered()?(this.parentWidget||this).on("Load",function(){ZSDKMessageManager.SendEvent(b,this)}):ZSDKMessageManager.SendEvent(b,this)}},c.prototype.off=function(d,a){if("string"!=typeof d)throw Error("Invalid eventname parameter passed.");if("function"!=typeof a)throw Error("Invalid function parameter passed.");d=this.eventHandlers[d];
if(Array.isArray(d)){var c,b=[];for(c=0;c<d.length;c++)d[c]===a&&b.push(c);for(;b.length;)d.splice(b.pop(),1)}},c.prototype._sendEvent=function(c,a,e){return ZSDKMessageManager.SendEvent({type:"__EVENT__",eventName:c,data:a,isPromise:e},this)},c.prototype.emit=function(c,a){ZSDKMessageManager.SendEvent({type:"__EMIT__",eventName:c,data:a},this)},c.prototype.isRegistered=function(){return this._isRegistered},c.prototype.fetch=function(c){return ZSDKMessageManager.SendEvent({eventName:"__HTTP__",isPromise:!0,
options:c},this)},c.prototype.createInstance=function(c){return ZSDKMessageManager.SendEvent({eventName:"__CREATE_INSTANCE__",isPromise:!0,options:c},this)},c.prototype.modal=function(c){return"object"==typeof c&&(c.location="__MODAL__"),this.createInstance(c)},c.prototype.getWidgets=function(){return ZSDKMessageManager.SendEvent({eventName:"__WIDGETS_INFO__",isPromise:!0},this)},c.prototype.getWidgetInstance=function(d){if("string"!=typeof d)throw Error("Invalid WidgetID passed");if(this.parentWidget)return this.parentWidget.getWidgetInstance(d);
var a=this._childWidgets[d];return a||(this._childWidgets[d]=a=new c({key:d,parentWidget:this})),a},c.prototype.getFileObject=function(c){return new File([c.slice(0,c.size)],c.name,{type:c.type})},{Init:function(){return f||(f=new c({serviceOrigin:g.serviceOrigin}),ZSDKMessageManager.Init(f),f)},_getRootInstance:function(){return f}}}();
window.SigmaSDK=function(){function c(b){this._serviceName=b}var f,g=function(){if(!f.isRegistered())throw Error("App not registered.");},d=function(b,a){return f._sendEvent("SIGMA_"+b+"_EVENT",a,!0)},a=function(b,a){return Promise.reject({type:b,message:a})};c.prototype.isRegistered=function(){return f.isRegistered()};c.prototype.context=function(){return g(),f};c.prototype.createWidget=function(b){return g(),f.createInstance(b)};c.prototype.getWidget=function(b){return f.getWidgetInstance(b)};c.prototype.widgetsMeta=
function(){return g(),f.getWidgets()};c.prototype.on=function(b,a){return f.on(b,a)};c.prototype.off=function(b,a){return f.off(b,a)};c.prototype.trigger=function(b,a){return g(),f.emit(b,a)};c.prototype.modal=function(b){return g(),f.modal(b)};c.prototype.fetch=function(b){return g(),f.fetch(b)};c.prototype.get=function(b){if(g(),"string"!=typeof b&&!Array.isArray(b))return a("VALIDATION_ERROR","The get method accepts String or Array of Strings only.");b="string"==typeof b?[b]:b;return 0>=b.length?
a("VALIDATION_ERROR","The get method should not accept empty Array of Strings."):d(this._serviceName,{event_type:"get",properties:b})};c.prototype.getAll=function(b,c){return(g(),"string"!=typeof b)?a("VALIDATION_ERROR","The getAll method accepts module_name as String only."):d(this._serviceName,{event_type:"get_all",module_name:b,options:c})};c.prototype.set=function(b,c){if(g(),"string"!=typeof b&&"object"!=typeof b&&Array.isArray(b))return a("VALIDATION_ERROR","The set method accepts key-value pair or Object of key-value pairs only.");
var e;return("string"==typeof b?(e={},e[b]=c):e=b,0>=e.keys.length)?a("VALIDATION_ERROR","The set method should not accept empty Object."):d(this._serviceName,{event_type:"get_all",properties:e})};c.prototype.remove=function(b){if(g(),"string"!=typeof b&&!Array.isArray(b))return a("VALIDATION_ERROR","The remove method accepts String or Array of Strings only.");b="string"==typeof b?[b]:b;return 0>=b.length?a("VALIDATION_ERROR","The remove method should not accept empty Array of Strings."):d(this._serviceName,
{event_type:"remove",properties:b})};c.prototype.request=function(b){if(g(),!b.url||0>=b.url.trim().length)return a("VALIDATION_ERROR","The parameter url should not be empty");if("string"!=typeof b.url)return a("VALIDATION_ERROR","The parameter url should be type of string");if(b.method||(b.method="GET"),b.params&&"object"!=typeof b.params&&Array.isArray(b.params))return a("VALIDATION_ERROR","The parameter params should be type of object");if(b.headers&&"object"!=typeof b.headers&&Array.isArray(b.headers))return a("VALIDATION_ERROR",
"The parameter headers should be type of object");if(b.files){if("object"!=typeof b.files||Array.isArray(b.files))return a("VALIDATION_ERROR","The parameter files should be type of object");if(5<Object.keys(b.files).length)return a("VALIDATION_ERROR","You can upload a maximum of 5 files at a time.");for(var c=0;c<b.files.length;c++)b.files[c]=f.getFileObject(b.files[c])}return d(this._serviceName,{event_type:"request",options:b})};c.prototype.dispatch=function(b,a){g();return d(this._serviceName,
{event_type:b,options:a})};var e=function(b){return f=window.ZSDK.Init(),"function"==typeof b&&(f.isRegistered()?b.call():f.on("Load",b)),new c(this._serviceName)};return{CRM:{init:e.bind({_serviceName:"CRM"})},DESK:{init:e.bind({_serviceName:"DESK"})},PROJECTS:{init:e.bind({_serviceName:"PROJECTS"})},ORCHESTLY:{init:e.bind({_serviceName:"ORCHESTLY"})},MAIL:{init:e.bind({_serviceName:"MAIL"})},SHOW:{init:e.bind({_serviceName:"SHOW"})},SDP:{init:e.bind({_serviceName:"SDP"})},IOT:{init:e.bind({_serviceName:"IOT"})},
CATALYST:{init:e.bind({_serviceName:"CATALYST"})},FINANCE:{init:e.bind({_serviceName:"FINANCE"})},CONNECT:{init:e.bind({_serviceName:"CONNECT"})},TEAMINBOX:{init:e.bind({_serviceName:"TEAMINBOX"})},SPRINTS:{init:e.bind({_serviceName:"SPRINTS"})},BUGTRACKER:{init:e.bind({_serviceName:"BUGTRACKER"})},CREATOR:{init:e.bind({_serviceName:"CREATOR"})},PEOPLE:{init:e.bind({_serviceName:"PEOPLE"})},COMMERCE:{init:e.bind({_serviceName:"COMMERCE"})},SITES:{init:e.bind({_serviceName:"SITES"})},RECRUIT:{init:e.bind({_serviceName:"RECRUIT"})},
WORKDRIVE:{init:e.bind({_serviceName:"WORKDRIVE"})},WRITER:{init:e.bind({_serviceName:"WRITER"})}}}();var ZCSDK=new function(){var c=!1,f,g=void 0,d={};this._init=function(){if(!c){c=!0;f=new ZSDK;d.appSDK=f;var a;g=new Promise(function(c,b){a=c});f.OnLoad(function(){f.getContext().Event.Trigger("GET_INIT_PARAMS",!0,!0).then(function(c){d.initParams=c;f.getContext().Event.Trigger("GET_QUERY_PARAMS",!0,!0).then(function(b){d.queryParams=b;a()})})})}return g};this._getInitParams=function(){return d.initParams};this._getQueryParams=function(){return d.queryParams};this._getApi=function(){return{API:{RECORDS:new Records(d)},
UTIL:new Util(d)}}},ZOHO=new function(){var c=!1,f=new ZSDK.Init,g=void 0,d=void 0,a={},e;g=new Promise(function(b,a){e=b});f.on("Load",function(){e()});return{CREATOR:{API:new Records(a),UTIL:new Util(a),init:function(){if(!c){var b;d=new Promise(function(a,c){b=a});g.then(function(){c=!0;a.appSDK=f;f._sendEvent("GET_INIT_PARAMS",!0,!0).then(function(c){a.initParams=c;f._sendEvent("GET_QUERY_PARAMS",!0,!0).then(function(c){a.queryParams=c;b()})})}).catch(function(){})}return d}}}};
function Records(c){function f(a){a.scope||(a.scope=c.initParams.scope);a.envUrlFragment||(a.envUrlFragment=c.initParams.envUrlFragment.substr(1));a.appLinkName||(a.appLinkName=c.initParams.appLinkName)}function g(a,c){var b=!1,d;for(d in a){var e;if(e=!(c&&c.includes(d))){e=a[d];var f=!1,g;if(!(g=!e||null==e||""===e||"string"==typeof e&&0==e.trim().length)&&(g="object"==typeof e))a:{g=void 0;for(g in e){g=!1;break a}g=!0}g&&(f=!0);e=f}e&&(b=!0)}return b}function d(a){return new Promise(function(c,
b){var e=new FileReader;e.readAsDataURL(a);e.onload=function(){c(e.result)};e.onerror=function(a){b(a)}})}return{addRecord:function(a){if(g(a))return new Promise(function(a,b){b("Improper Configuration..!!")});f(a);return c.appSDK._sendEvent("ADD_RECORD",{formLinkName:a.formName,body:a.data},!0)},updateRecord:function(a){if(g(a))return new Promise(function(b,a){a("Improper Configuration..!!")});var e=a.id.toString().split(",");f(a);return c.appSDK._sendEvent("EDIT_RECORDS",{viewLinkName:a.reportName,
body:a.data,listOfRecords:e},!0)},deleteRecord:function(a){if(g(a))return new Promise(function(a,b){b("Improper Configuration..!!")});f(a);return c.appSDK._sendEvent("DELETE_RECORDS",{viewLinkName:a.reportName,criteria:a.criteria},!0)},getRecordById:function(a){if(g(a))return new Promise(function(a,b){b("Improper Configuration..!!")});f(a);return c.appSDK._sendEvent("GET_RECORD",{viewLinkName:a.reportName,id:a.id},!0)},getAllRecords:function(a){if(g(a,["criteria","page","pageSize"]))return new Promise(function(a,
b){b("Improper Configuration..!!")});f(a);return c.appSDK._sendEvent("GET_RECORDS",{viewLinkName:a.reportName,criteria:a.criteria,page:a.page,pageSize:a.pageSize},!0)},uploadFile:function(a){if(g(a,["file","parentId"]))return new Promise(function(a,b){b("Improper Configuration..!!")});f(a);return a.file?a.file.size&&50<a.file.size/1024/1024?new Promise(function(a,b){b("Improper Configuration..!!")}):new Promise(function(e,b){var f=d(a.file),g="",p=a.file.name;f.then(function(d){g=d;d={viewLinkName:a.reportName,
id:a.id,fieldName:a.fieldName,file:g,fileName:p};a.parentId&&(d.parentId=a.parentId);c.appSDK._sendEvent("UPLOAD_FILE",d,!0).then(function(b){e(b)}).catch(function(a){b(a)})}).catch(function(a){b(a)})}):new Promise(function(a,b){b("Improper Configuration..!!")})}}}
function Util(c){return{setImageData:function(f,g,d){if(g.startsWith("/api/v2/")){var a={};a.src=g;c.appSDK._sendEvent("IMAGE_LOAD",a,!0).then(function(a){f.setAttribute("src",a);d({status:"200",statusText:"success"})}).catch(function(a){if(d)d(a);else{var b=window.console;b.log("Error: Unable to set image data");b.log(a)}})}else f.setAttribute("src",g)},getInitParams:function(){return c.initParams},getQueryParams:function(){return c.queryParams}}};